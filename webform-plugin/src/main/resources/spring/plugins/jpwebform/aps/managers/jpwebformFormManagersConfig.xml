<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:context="http://www.springframework.org/schema/context"
		xmlns:task="http://www.springframework.org/schema/task"
		xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">


	<bean id="jpwebformFormManager" class="it.difesa.esercito.plugins.jpwebform.aps.system.services.form.FormManager"
			parent="abstractService">
		<property name="formDAO" >
			<bean class="it.difesa.esercito.plugins.jpwebform.aps.system.services.form.FormDAO">
				<property name="dataSource" ref="portDataSource" />
			</bean>
		</property>
	</bean>

	<bean id="jpwebformMailManager" class="it.difesa.esercito.plugins.jpwebform.aps.system.services.mail.MailManager"
			parent="abstractService">
		<property name="formManager" ref="jpwebformFormManager" />
		<property name="mailHost" value="${SME_SMTP_HOST}"/>
		<property name="debug" value="${SME_SMTP_DEBUG:true}"/>
		<property name="mailPort" value="${SME_SMTP_PORT}"/>
		<property name="mailUsername" value="${SME_SMTP_USERNAME}"/>
		<property name="mailPassword" value="${SME_SMTP_PASSWORD}"/>
		<property name="mailAuth" value="${SME_SMTP_AUTH}"/>
		<property name="startTls" value="${SME_SMTP_STARTTLS}"/>
		<property name="tlsRequired" value="${SME_SMTP_STARTTLS_REQUIRED}"/>
		<property name="sslEnable" value="${SME_SSL_ENABLE}"/>
		<property name="recipientsCSV" value="${SME_SMTP_RECIPIENTS}"/>
	</bean>

	<task:scheduled-tasks>
<!--		<task:scheduled ref="jpwebformMailManager" method="retry" fixed-rate="2000"/>-->
		<task:scheduled ref="jpwebformMailManager" method="retry" cron="0 0 */2 * * *"/>
	</task:scheduled-tasks>

</beans>
