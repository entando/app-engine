<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
           http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd">

    <changeSet id="00000000000001_jpsolr_dataPort_production" author="entando" context="production">
        <preConditions onFail="MARK_RAN">
            <!-- Use uppercase table name to avoid MySQL issue -->
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM databasechangelog WHERE id =
                '00000000000001_jpsolr_dataPort_restore'
            </sqlCheck>
            <!-- This changeSet contains the same logic (in XML) of the old 00000000000001_dataPort_production.sql file, that was included by changeSetPort.xml
                 Execution of this changeSet must be skipped if tables had already been filled using that file -->
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM DATABASECHANGELOG WHERE id =
                '00000000000001_jpsolr_dataPort_production' AND filename = 'liquibase/jpsolr/changeSetPort.xml'
            </sqlCheck>
        </preConditions>

        <insert tableName="widgetcatalog">
            <column name="code">jpsolr_facetResults</column>
            <column name="titles" valueClobFile="clob/production/jpsolr_facetResults_titles.xml"></column>
            <column name="parameters" valueClobFile="clob/production/jpsolr_facetResults_parameters.xml"></column>
            <column name="plugincode">jpsolr</column>
            <column name="locked">1</column>
        </insert>

        <insert tableName="widgetcatalog">
            <column name="code">jpsolr_facetTree</column>
            <column name="titles" valueClobFile="clob/production/jpsolr_facetTree_titles.xml"></column>
            <column name="parameters" valueClobFile="clob/production/jpsolr_facetTree_parameters.xml"></column>
            <column name="plugincode">jpsolr</column>
            <column name="locked">1</column>
        </insert>

        <insert tableName="localstrings">
            <column name="keycode">jpsolr_REMOVE_FILTER</column>
            <column name="langcode">it</column>
            <column name="stringvalue">Rimuovi</column>
        </insert>
        <insert tableName="localstrings">
            <column name="keycode">jpsolr_REMOVE_FILTER</column>
            <column name="langcode">en</column>
            <column name="stringvalue">Remove</column>
        </insert>
        <insert tableName="localstrings">
            <column name="keycode">jpsolr_TITLE_TREE</column>
            <column name="langcode">it</column>
            <column name="stringvalue">Albero delle Faccette</column>
        </insert>
        <insert tableName="localstrings">
            <column name="keycode">jpsolr_TITLE_TREE</column>
            <column name="langcode">en</column>
            <column name="stringvalue">Facet Tree</column>
        </insert>
        <insert tableName="localstrings">
            <column name="keycode">jpsolr_TITLE_FACET_RESULTS</column>
            <column name="langcode">it</column>
            <column name="stringvalue">Faccette</column>
        </insert>
        <insert tableName="localstrings">
            <column name="keycode">jpsolr_TITLE_FACET_RESULTS</column>
            <column name="langcode">en</column>
            <column name="stringvalue">Facets</column>
        </insert>

        <insert tableName="widgetcatalog">
            <column name="code">jpsolr_inc_facetNavTree</column>
            <column name="plugincode">jpsolr</column>
            <column name="defaultgui" valueClobFile="clob/production/jpsolr_inc_facetNavTree_defaultgui.ftl"></column>
            <column name="locked">1</column>
        </insert>

        <insert tableName="widgetcatalog">
            <column name="code">jpsolr_facetTree</column>
            <column name="widgettypecode">jpsolr_facetTree</column>
            <column name="plugincode">jpsolr</column>
            <column name="defaultgui" valueClobFile="clob/production/jpsolr_inc_facetTree_defaultgui.ftl"></column>
            <column name="locked">1</column>
        </insert>

        <insert tableName="widgetcatalog">
            <column name="code">jpsolr_facetResults</column>
            <column name="widgettypecode">jpsolr_facetResults</column>
            <column name="plugincode">jpsolr</column>
            <column name="defaultgui" valueClobFile="clob/production/jpsolr_facetResults_defaultgui.ftl"></column>
            <column name="locked">1</column>
        </insert>
    </changeSet>

</databaseChangeLog>